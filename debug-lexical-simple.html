<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lexical Debug - Simple</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1d2021;
            color: #ebdbb2;
            padding: 20px;
        }
        .editor-container {
            background: #282828;
            border: 2px solid #504945;
            border-radius: 6px;
            padding: 12px;
            min-height: 200px;
            margin: 20px 0;
        }
        .editor {
            outline: none;
            min-height: 180px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
            color: #ebdbb2;
            background: transparent;
            border: none;
            width: 100%;
            padding: 8px;
        }
        .status {
            background: #3c3836;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Lexical Debug - Simple Test</h1>
    
    <div class="status" id="status">
        Loading scripts...
    </div>

    <div class="editor-container">
        <div id="editor-root">
            <div style="padding: 20px; text-align: center; color: #928374;">
                Editor will appear here when scripts load...
            </div>
        </div>
    </div>

    <div class="status">
        <strong>If you see this and no editor above:</strong>
        <br>1. Check browser console for errors (F12)
        <br>2. Try opening from a local server instead of file://
        <br>3. We can build a version using your project's existing Lexical setup
    </div>

    <!-- Load React first -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Test React loading -->
    <script>
        if (typeof React === 'undefined') {
            document.getElementById('status').innerHTML = 'ERROR: React failed to load from CDN';
        } else {
            document.getElementById('status').innerHTML = 'React loaded, loading Lexical...';
        }
    </script>

    <!-- Load Lexical -->
    <script src="https://unpkg.com/lexical@0.12.2/Lexical.dev.js"></script>
    <script src="https://unpkg.com/@lexical/react@0.12.2/LexicalReact.dev.js"></script>
    
    <!-- Test Lexical loading -->
    <script>
        if (typeof Lexical === 'undefined') {
            document.getElementById('status').innerHTML = 'ERROR: Lexical failed to load from CDN';
        } else {
            document.getElementById('status').innerHTML = 'Lexical loaded, initializing editor...';
        }
    </script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone@7.23.3/babel.min.js"></script>

    <script type="text/babel">
        try {
            const { useState } = React;
            const { createRoot } = ReactDOM;
            
            const {
                $getRoot,
                $createParagraphNode,
                $createTextNode,
            } = Lexical;
            
            const {
                LexicalComposer,
            } = LexicalReact;
            
            const {
                RichTextPlugin,
                ContentEditable,
                LexicalErrorBoundary,
                OnChangePlugin,
            } = LexicalReact;

            function SimpleEditor() {
                const initialConfig = {
                    namespace: 'SimpleDebugEditor',
                    nodes: [],
                    onError: (error) => {
                        console.error('Lexical Error:', error);
                        document.getElementById('status').innerHTML = 'Lexical Error: ' + error.message;
                    },
                    theme: {}
                };

                const handleChange = (editorState, editor) => {
                    console.log('Editor content changed');
                    document.getElementById('status').innerHTML = 'Editor working! Type something...';
                };

                return React.createElement(
                    'div',
                    { className: 'editor-container' },
                    React.createElement(
                        LexicalComposer,
                        { initialConfig: initialConfig },
                        React.createElement(
                            RichTextPlugin,
                            {
                                contentEditable: React.createElement(ContentEditable, {
                                    className: 'editor',
                                    style: {
                                        minHeight: '180px',
                                        outline: 'none',
                                        padding: '8px',
                                        color: '#ebdbb2',
                                        fontSize: '14px',
                                        fontFamily: 'Courier New, monospace'
                                    }
                                }),
                                placeholder: React.createElement('div', {
                                    style: {
                                        position: 'absolute',
                                        top: '8px',
                                        left: '8px',
                                        opacity: 0.5,
                                        pointerEvents: 'none'
                                    }
                                }, 'Click here and type...'),
                                ErrorBoundary: LexicalErrorBoundary
                            }
                        ),
                        React.createElement(OnChangePlugin, { onChange: handleChange })
                    )
                );
            }

            const root = createRoot(document.getElementById('editor-root'));
            root.render(React.createElement(SimpleEditor));
            
            document.getElementById('status').innerHTML = 'Editor initialized successfully!';
            
        } catch (error) {
            console.error('Setup error:', error);
            document.getElementById('status').innerHTML = 'Setup Error: ' + error.message;
        }
    </script>
</body>
</html>